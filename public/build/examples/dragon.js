let staticPath="./static/";var engine;async function buildScene(){var e=document.createElement("canvas");document.body.appendChild(e),(engine=new FlexLight(e)).io="web";let n=engine.camera;var e=engine.scene,t=([n.x,n.y,n.z]=[-10,14,-10],[n.fx,n.fy]=[-.9,.45],e.primaryLightSources=[[50,70,50]],e.primaryLightSources[0].intensity=5e4,e.primaryLightSources[0].variation=10,e.ambientLight=[.05,.05,.05],e.ambientLight=[.1,.1,.1],e.Plane([-500,-1,-500],[500,-1,-500],[500,-1,500],[-500,-1,500])),t=(t.roughness=1,t.metallicity=.8,e.queue.push(t),engine.scene.Transform()),a=(await t.move(15,0,15),await t.scale(.5),await e.importObj(staticPath+"objects/dragon_lp.obj"));a.transform=t,a.roughness=0,a.metallicity=1,a.translucency=1,a.ior=1.5,a.color=[255,100,100];let i=engine.scene.Transform();await i.move(5,1,12),await i.scale(2);var t=await e.importObj(staticPath+"objects/monke_smooth.obj"),o=(t.transform=i,t.roughness=.1,t.metallicity=1,t.color=[255,200,100],await e.importObj(staticPath+"objects/sphere.obj")),a=(await o.scale(4),await o.move(15,3,0),o.metallicity=1,o.roughness=0,o.translucency=1,o.ior=1.5,e.queue.push(a,t,o),e.Bounding([e.Plane([-1,-1,0],[1,-1,0],[1,1,0],[-1,1,0])])),t=(a.scale(15),await a.move(10,0,22),a.metallicity=1,a.roughness=0,e.queue.push(a),e.Bounding([e.Plane([-1,1,0],[1,1,0],[1,-1,0],[-1,-1,0])]));t.scale(15),await t.move(10,0,-10),t.metallicity=1,t.roughness=0,e.queue.push(t),await e.generateBVH(),await engine.renderer.updateScene(),console.log(e.queue);let r=0;setInterval(()=>{r+=.001;var e=Math.diff([n.x,n.y,n.z],i.position),t=Math.length(e),a=Math.sign(e[2])*Math.acos(e[0]/Math.sqrt(e[0]*e[0]+e[2]*e[2]))-.5*Math.PI,e=Math.acos(e[1]/t)-.5*Math.PI;i.rotateSpherical(a,e)},1e3/330);var s=document.createElement("div");document.body.appendChild(s),setInterval(()=>s.textContent=engine.renderer.fps,1e3)}buildScene();