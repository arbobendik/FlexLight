import{FlexLight}from"../flexlight.js";function load(){null!==document.currentScript&&document.currentScript.remove();let t=new URLSearchParams(location.search);var e=document.createElement("script"),a=t.get("v")??"wave";e.src="./build/loader/examples/"+a+".js",document.head.appendChild(e),window.addEventListener("load",function(){let r=engine.config,e=document.getElementById("scriptForm"),a=document.getElementById("parameterForm"),c=["antialiasing"],l=["filter","temporal","hdr"];let n=["renderQuality","samplesPerRay","maxReflections","minImportancy"];a.children.pathtracing.checked="true"===(localStorage.getItem("pathtracing")??"true"),a.children.api.value=localStorage.getItem("api")??"webgl2",engine.api=a.children.api.value,engine.renderer=a.children.pathtracing.checked?"pathtracer":"rasterizer",c.forEach(e=>{r[e]=localStorage.getItem(e)??r[e],a.children[e].value=r[e]}),l.forEach(e=>{r[e]="true"===(localStorage.getItem(e)??"true"),a.children[e].checked=r[e]}),["screenshot"].forEach(e=>{document.getElementById(e).addEventListener("click",()=>{engine.screenshot()})}),n.forEach(e=>{r[e]=Number(localStorage.getItem(e)??r[e]),a.children[e].value=r[e]}),document.querySelectorAll("output").forEach((e,t)=>{e.value=r[n[t]];var a=document.getElementById(n[t]);a.addEventListener("input",()=>e.value=a.value)}),t.has("v")?e[0].value=t.get("v"):e.submit(),e.addEventListener("change",()=>{t.set("v",e[0].value),location.search=t.toString()}),a.addEventListener("change",()=>{var e=document.getElementById("pathtracing").checked,t=document.getElementById("api").value;"true"===localStorage.getItem("pathtracing")!==e&&(localStorage.setItem("pathtracing",e),engine.renderer=e?"pathtracer":"rasterizer"),localStorage.getItem("api")!==t&&(localStorage.setItem("api",t),engine.api=t),c.forEach(e=>{r[e]=a.children[e].value,localStorage.setItem(e,r[e])}),l.forEach(e=>{r[e]=a.children[e].checked,localStorage.setItem(e,r[e])}),n.forEach(e=>{r[e]=Number(a.children[e].value),localStorage.setItem(e,r[e])})})},{once:!0})}window.FlexLight=FlexLight,console.log(FlexLight),load();